services:
  jupyter:
    build: .
    container_name: ai-workshop-jupyter
    ports:
      - "8888:8888"
    volumes:
      # Mount the notebooks directory
      - .:/workspace/notebooks
      # Persist Jupyter settings
      - jupyter-data:/home/jupyter/.jupyter
    environment:
      # Load API keys from .env file
      - GOOGLE_API_KEY=${GOOGLE_API_KEY}
      - OPENAI_API_KEY=${OPENAI_API_KEY:-}
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY:-}
      - DEFAULT_MODEL=${DEFAULT_MODEL:-gemini/gemini-2.5-flash}
    env_file:
      - .env
    command: >
      jupyter lab
      --ip=0.0.0.0
      --port=8888
      --no-browser
      --NotebookApp.token=''
      --NotebookApp.password=''
      --allow-root
    restart: unless-stopped

volumes:
  jupyter-data:
